<!doctype html><html lang=en><head><title>Exploratory Open Source Software Testing with Spock - QAware | Software Engineering Blog</title>
<meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=yes'><meta http-equiv=X-UA-Compatible content='IE=edge'><meta name=description content='I will talk about exploratory software testing of open source software components, libraries or whole frameworks.'><meta property='og:locale' content='en_US'><meta property='og:type' content='article'><meta property='og:title' content='Exploratory Open Source Software Testing with Spock'><meta property='og:description' content='I will talk about exploratory software testing of open source software components, libraries or whole frameworks.'><meta property='og:url' content='https://blog.qaware.de/posts/spock-testing/'><meta property='og:image' content='https://blog.qaware.de/images/images/qaware_logo.png'><meta name=msapplication-TileColor content='#da532c'><meta name=theme-color content='#ffffff'><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json crossorigin=use-credentials><link rel=icon href=/QAware_Logo_Icon_RGB_Petrol.svg type=image/svg+xml><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://blog.qaware.de/posts/spock-testing/><link rel=stylesheet href=https://blog.qaware.de/css/main.d6f73e4ceed166763b77e6ae4748dae9ad47198cedbf1a4fc474c78a007dbf47d6dee613baf3572eedb6eece647a608333945bf28218018eb8455db0c1399674.css integrity='sha512-1vc+TO7RZnY7d+auR0ja6a1HGYztvxpPxHTHigB9v0fW3uYTuvNXLu227s5kemCDM5Rb8oIYAY64RV2wwTmWdA==' title=templateStyle><script id=Cookiebot src=https://consent.cookiebot.com/uc.js data-cbid=4e938949-aa56-465e-9c2a-175bb6c31d81 data-blockingmode=auto type=text/javascript></script></head><body><header><div id=main-header><a href=/ id=main-header-logo><img src=/images/icons/logo_qaware.svg alt=QAware id=main-header-logo-img></a><div id=main-header-nav-items-container><nav id=main-nav><ul class=main-nav-menu><li class=main-nav-menu><a href=https://blog.qaware.de/ class="main-nav-menu nav-item">Posts</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://blog.qaware.de/tags/ class="main-nav-sub-menu nav-item">Tags</a></li><li class=main-nav-sub-menu><a href=https://blog.qaware.de/posts/ class="main-nav-sub-menu nav-item">Archive</a></li></ul></li><li class=main-nav-menu><a href=https://blog.qaware.de/ class="main-nav-menu nav-item">Resources</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://www.github.com/qaware class=main-nav-sub-menu>GitHub</a></li><li class=main-nav-sub-menu><a href=https://de.slideshare.net/QAware class=main-nav-sub-menu>SlideShare</a></li><li class=main-nav-sub-menu><a href=https://www.youtube.com/user/QAwareGmbH class=main-nav-sub-menu>YouTube</a></li><li class=main-nav-sub-menu><a href=https://www.meetup.com/de-DE/Cloud-Native-Night class=main-nav-sub-menu>Meetup Mainz</a></li><li class=main-nav-sub-menu><a href=https://www.meetup.com/de-DE/cloud-native-muc/ class=main-nav-sub-menu>Meetup Munich</a></li></ul></li><li class=main-nav-menu><a href=https://www.qaware.de class=main-nav-menu>Company</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://www.qaware.de class=main-nav-sub-menu>Website</a></li><li class=main-nav-sub-menu><a href=https://twitter.com/qaware class=main-nav-sub-menu>Twitter</a></li><li class=main-nav-sub-menu><a href=http://www.linkedin.com/company/qaware-gmbh class=main-nav-sub-menu>Linkedin</a></li><li class=main-nav-sub-menu><a href=http://www.xing.com/companies/qawaregmbh class=main-nav-sub-menu>Xing</a></li><li class=main-nav-sub-menu><a href=http://www.kununu.com/qaware class=main-nav-sub-menu>Kununu</a></li></ul></li><li class=main-nav-menu><a href=https://www.qaware.de/kontakt class=main-nav-menu>Contact</a></li></ul></nav><a id=mobile-nav-icon-link href=#><div id=mobile-nav-icon></div></a></div></div><div id=mobile-nav-dropdown><nav id=mobile-nav class="mobile-nav collapsed"><ul><li><a href=https://blog.qaware.de/ class=nav-item>Posts</a><ul><li><a href=https://blog.qaware.de/tags/ class=nav-item>Tags</a></li><li><a href=https://blog.qaware.de/posts/ class=nav-item>Archive</a></li></ul></li><li><a href=https://blog.qaware.de/ class=nav-item>Resources</a><ul><li><a href=https://www.github.com/qaware>GitHub</a></li><li><a href=https://de.slideshare.net/QAware>SlideShare</a></li><li><a href=https://www.youtube.com/user/QAwareGmbH>YouTube</a></li><li><a href=https://www.meetup.com/de-DE/Cloud-Native-Night>Meetup Mainz</a></li><li><a href=https://www.meetup.com/de-DE/cloud-native-muc/>Meetup Munich</a></li></ul></li><li><a href=https://www.qaware.de class=nav-item>Company</a><ul><li><a href=https://www.qaware.de>Website</a></li><li><a href=https://twitter.com/qaware>Twitter</a></li><li><a href=http://www.linkedin.com/company/qaware-gmbh>Linkedin</a></li><li><a href=http://www.xing.com/companies/qawaregmbh>Xing</a></li><li><a href=http://www.kununu.com/qaware>Kununu</a></li></ul></li><li><a href=https://www.qaware.de/kontakt class=nav-item>Contact</a></li></ul></nav></div></header><main><div class='wrap mt-4 post'><div><p class='post_date pale'>31. August 2015</p><h1 class=post_title>Exploratory Open Source Software Testing with Spock</h1><p class=pale>by Mario-Leander Reimer | 1788 words | ~9 min read</p><p><a class=post_tag href=/tags/agile/>agile</a>
<a class=post_tag href=/tags/bdd/>bdd</a>
<a class=post_tag href=/tags/groovy/>groovy</a>
<a class=post_tag href=/tags/integration-testing/>integration testing</a>
<a class=post_tag href=/tags/java/>java</a>
<a class=post_tag href=/tags/specification/>specification</a>
<a class=post_tag href=/tags/spock/>spock</a>
<a class=post_tag href=/tags/tdd/>tdd</a>
<a class=post_tag href=/tags/unit-testing/>unit testing</a>
<a class=post_tag href=/tags/testing/>testing</a></p><div class=post_body><div class=post_inner><p>Exploratory software testing is a technique every agile developer should know about. It&rsquo;s about test driving your application without a predetermined course of action. Although this seems like random free style testing, in the hands of an experienced developer this proves to be a powerful technique to find bugs and undesired behaviour.</p><p>But in this article I will talk about exploratory software testing of open source software components, libraries or whole frameworks. So why would you want to do this? Think about this: the amount of hand written code in any modern application is somewhere between 3 to 10 percent of the overall byte code instructions. The rest are usually 3rd party open source libraries and frameworks used by the application such as Apache Commons or the Spring Framework.</p><p>But how do you as a software developer or architect decide which open source component to use for a certain required functionality? How do you know that this fancy framework you read about in a programming magazine suites your requirements? How do you evaluate how a library is integrated best into your application?</p><p>This is when exploratory testing of open source software comes into play. In summary, the goals of exploratory testing of open source components are:</p><ul><li><strong>To gain an understanding of how the library or framework works, what its interface looks like, and what functionality it implements</strong>: The goal here is to explore the functionality of the open source component in-depth and to find new unexplored functionality.</li><li><strong>To force the open source software to exhibit its capabilities:</strong> This will provide evidence that the software performs the function for which it was designed and that it satisfies your requirements.</li><li><strong>To find bugs or analyse the performance:</strong> Exploring the edges of the open source component and hitting potential soft spots and weaknesses.</li><li><strong>To act as a safeguard when upgrading the library to a new version:</strong> This allows for easier maintenance of your application and its dependencies. The exploratory test detect regressions a new version might introduce.</li></ul><h1 id=scenario-based-software-exploration>Scenario based software exploration</h1><p>If you want to use a new open source component in your project and application you usually already have a rough vision of what you expect and want to gain from its usage. So the idea of scenario based software exploration is: describe your visions and expectations in the form of usage scenarios. These scenarios are your map of the uncharted terrain of the libraries&rsquo; functionality. And the scenarios will guide you through the test process. In general, a useful scenario will do one or more of the following:</p><ul><li>Tell a user story and describe the requirements</li><li>Demonstrate how a certain functionality works</li><li>Demonstrate an integration scenario</li><li>Describe cautions and things that could go wrong</li></ul><h1 id=exploratory-testing-with-spock>Exploratory Testing with Spock</h1><p>Of course you can write exploratory tests with more traditional xUnit frameworks like JUnit or TestNG. So why use Spock instead? I think the <a href=https://github.com/spockframework/spock>Spock Framework</a> is way better suited to write exploratory tests because it supports the scenario based software exploration by its very nature:</p><ul><li>Specification as documentation</li><li>Reduced, beautiful and highly expressive specification language syntax</li><li>Support for Stubbing and Mocking</li><li>Good integration into IDEs and build tools</li></ul><p>The following sections will showcase these points in more detail by using Spock to write exploratory tests for the Kryo serialization library.</p><h2 id=specification-as-documentation>Specification as documentation</h2><p>The good thing about Spock is that it allows to use natural language in your specification classes. Have a look at the following example. Currently it does not test anything, it is pure documentation. Even if you do not know Spock at all, I think you can understand what the test is supposed to do just by reading the specification. Awesome.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=nd>@Title</span><span class=o>(</span><span class=s1>&#39;Exploratory test for the shallow/deep copy functionality of Kryo&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Narrative</span><span class=o>(</span><span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>   Making object copies in Java is an often required functionality.
</span></span></span><span class=line><span class=cl><span class=s1>   Writing explicit copy constructors is fast but also laborious.
</span></span></span><span class=line><span class=cl><span class=s1>   Instead the Java Serialization is often misused to make copies.
</span></span></span><span class=line><span class=cl><span class=s1>   Kryo performs fast automatic deep and shallow copying by copying
</span></span></span><span class=line><span class=cl><span class=s1>   from object to object.
</span></span></span><span class=line><span class=cl><span class=s1>&#39;&#39;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>KryoShallowAndDeepCopySpec</span> <span class=kd>extends</span> <span class=n>Specification</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Subject</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>kryo</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Kryo</span><span class=o>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=s2>&#34;Making a shallow copy of a semi complex POJO&#34;</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nl>given:</span> <span class=s2>&#34;a single semi complex POJO instance&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nl>when:</span> <span class=s2>&#34;we make a shallow copy using Kryo&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nl>then:</span> <span class=s2>&#34;the object is a copy, all nested instances are references&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=s2>&#34;Making a deep copy of a semi complex POJO construct&#34;</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nl>given:</span> <span class=s2>&#34;a semi complex POJO instance construct&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nl>when:</span> <span class=s2>&#34;we make a deep copy using Kryo&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nl>then:</span> <span class=s2>&#34;the object and all nested instances are copies&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=reduced-beatiful-and-highly-expressive-language-syntax>Reduced, beatiful and highly expressive language syntax</h2><p>The reduced syntax offered by Spock mainly comes from its Groovy nature. Exploratory tests really benefit from this because it helps you to focus on the important bits: the open source component you want to explore. In addition to this Spock brings along its own DSL to make your specification even more expressive. Every feature method in a specification is structured into so-called <em>blocks</em>.</p><p><img src=/images/Blocks2Phases.png alt>
See <a href=http://spockframework.org/spock/docs/1.0/spock_primer.html>Spock Primer</a> for more details.</p><p>These blocks not only allow you to express the different phases of your test. By using these blocks you can demonstrate how an open source component works and how it can be integrated into your codebase. The <em>setup:</em> or <em>given:</em> block sets up the required input using classes from your application domain. The <em>when:</em> and <em>then:</em> blocks will exhibit how a certain functionality works by interacting with the test subject and asserting the desired behaviour. Again, due to the Groovy nature of Spock your assertions only need to evaluate to true or false. And for the last bit of expressiveness you can use your good old Hamcrest matchers.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=s2>&#34;Deserialize a GCustomer object from a temporary data file&#34;</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nl>given:</span> <span class=s2>&#34;a Kryo input for a temporary data file&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>input</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Input</span><span class=o>(</span><span class=k>new</span> <span class=n>FileInputStream</span><span class=o>(</span><span class=n>temporaryFile</span><span class=o>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>when:</span> <span class=s2>&#34;we deserialize the object&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>customer</span> <span class=o>=</span> <span class=n>kryo</span><span class=o>.</span><span class=na>readObject</span> <span class=n>input</span><span class=o>,</span> <span class=n>GCustomer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>then:</span> <span class=s2>&#34;the customer POJO is initialized correctly&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>customer</span>
</span></span><span class=line><span class=cl>    <span class=n>expect</span> <span class=n>customer</span><span class=o>,</span> <span class=n>notNullValue</span><span class=o>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>customer</span><span class=o>.</span><span class=na>name</span> <span class=o>==</span> <span class=s1>&#39;Mr. Spock&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>expect</span> <span class=n>customer</span><span class=o>.</span><span class=na>name</span><span class=o>,</span> <span class=n>equalTo</span><span class=o>(</span><span class=s1>&#39;Mr. Spock&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=support-for-stubbing-and-mocking>Support for Stubbing and Mocking</h2><p>The Spock Framework also brings its own support for Mocks and Stubs to provide the means for interaction based testing. This testing technique focuses on the behaviour of the object under test and helps us to explore how a component interacts with its collaborators, by calling methods on them, and how this influences the component&rsquo;s behavior. Being able to define mocks or stubs for every interface and almost any class also alleviates you from having to manually implement fake objects. Stubs only provide you with the ability to return predefined responses for defined interactions, whereas Mocks additionally provide you with the ability to verify the interactions.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=s2>&#34;Explore writing an object using a Serializer mock&#34;</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nl>given:</span> <span class=s2>&#34;a Kryo Serializer mock and dummy output&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>serializer</span> <span class=o>=</span> <span class=n>Mock</span><span class=o>(</span><span class=n>Serializer</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>output</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Output</span><span class=o>(</span><span class=k>new</span> <span class=kt>byte</span><span class=o>[</span><span class=mi>1</span><span class=o>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>when:</span> <span class=s2>&#34;serializing the string Mr. Spock&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>kryo</span><span class=o>.</span><span class=na>writeObject</span><span class=o>(</span><span class=n>output</span><span class=o>,</span> <span class=s1>&#39;Mr. Spock&#39;</span><span class=o>,</span> <span class=n>serializer</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>then:</span> <span class=s2>&#34;we expect 1 interaction with the serializer&#34;</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=o>*</span> <span class=n>serializer</span><span class=o>.</span><span class=na>write</span><span class=o>(</span><span class=n>kryo</span><span class=o>,</span> <span class=n>output</span><span class=o>,</span> <span class=s1>&#39;Mr. Spock&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>def</span> <span class=s2>&#34;Explore reading an object using a Serializer stub&#34;</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nl>given:</span> <span class=s2>&#34;a dummy input and a Kryo Serializer stub&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>input</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Input</span><span class=o>([</span><span class=mi>1</span><span class=o>]</span> <span class=k>as</span> <span class=kt>byte</span><span class=o>[])</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>serializr</span> <span class=o>=</span> <span class=n>Stub</span><span class=o>(</span><span class=n>Serializer</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>and:</span> <span class=s2>&#34;a stubbed Customer response&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>serializr</span><span class=o>.</span><span class=na>read</span><span class=o>(</span><span class=n>kryo</span><span class=o>,</span> <span class=n>_</span><span class=o>,</span> <span class=n>GCustomer</span><span class=o>)</span> <span class=o>&gt;&gt;</span> <span class=k>new</span> <span class=n>GCustomer</span><span class=o>(</span><span class=nl>name:</span> <span class=s1>&#39;Mr. Spock&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>when:</span> <span class=s2>&#34;deserializing the input&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>customer</span> <span class=o>=</span> <span class=n>kryo</span><span class=o>.</span><span class=na>readObject</span><span class=o>(</span><span class=n>input</span><span class=o>,</span> <span class=n>GCustomer</span><span class=o>,</span> <span class=n>serializr</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nl>then:</span> <span class=s2>&#34;we get Mr. Spock again&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>customer</span><span class=o>.</span><span class=na>name</span> <span class=o>==</span> <span class=s1>&#39;Mr. Spock&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=good-integration-into-ides-and-build-tools>Good Integration into IDEs and Build Tools</h2><p>A good IDE and build tool integration is an important feature, since we want our exploratory tests to be an integral part of our applications&rsquo; codebase. Fortunately, the Spock support is already quite good, mainly due to the fact that Spock tests are essentially translated to JUnit tests. To get proper syntax high lighting and code completion you can install dedicated plugins for your favourite IDE. For IntelliJ there is the <a href="https://plugins.jetbrains.com/plugin/7114?pr=">Spock Framework Enhancements Plugin</a> and for Eclipse there is the <a href=https://marketplace.eclipse.org/content/spock-plugin>Spock Plugin</a> available.</p><p>The build tool integration is also pretty straight forward. If you are using Gradle for your build, the integration is only a matter of specifying the correct dependencies and applying the groovy plugin as shown in the follow snippet.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;groovy&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// mandatory dependencies for using Spock
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>compile</span> <span class=s1>&#39;org.codehaus.groovy:groovy-all:2.4.1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>testCompile</span> <span class=s1>&#39;org.spockframework:spock-core:1.0-groovy-2.4&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>testCompile</span> <span class=s1>&#39;junit:junit:4.12&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>testCompile</span> <span class=s1>&#39;org.mockito:mockito-all:1.10.19&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// optional dependencies for using Spock
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// only necessary if Hamcrest matchers are used
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>testCompile</span> <span class=s1>&#39;org.hamcrest:hamcrest-core:1.3&#39;</span> 
</span></span><span class=line><span class=cl>    <span class=c1>// allows mocking of classes (in addition to interfaces)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>testRuntime</span> <span class=s1>&#39;cglib:cglib-nodep:3.1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// allows mocking of classes without default constructor
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>testRuntime</span> <span class=s1>&#39;org.objenesis:objenesis:2.1&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>For Maven you have to do a little more than just specifying the required Spock dependencies in your POM file. Because Spock tests are written in Groovy, you will also have to include the <a href=https://github.com/groovy/GMavenPlus>GMavenPlus Plugin</a> into your build so that your Spock tests get compiled. You may also have to tweak the Surefire Plugin configuration to include <code>**/*Spec.java</code> as valid tests.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;build&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;plugins&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Mandatory plugins for using Spock --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;groupId&gt;</span>org.codehaus.gmavenplus<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>gmavenplus-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;version&gt;</span>1.4<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;executions&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;execution&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;goals&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;goal&gt;</span>compile<span class=nt>&lt;/goal&gt;</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&lt;goal&gt;</span>testCompile<span class=nt>&lt;/goal&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;/goals&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/execution&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/executions&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/plugin&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Optional plugins for using Spock --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>maven-surefire-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;version&gt;</span>2.6<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;useFile&gt;</span>false<span class=nt>&lt;/useFile&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;includes&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;include&gt;</span>**/*Spec.java<span class=nt>&lt;/include&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;include&gt;</span>**/*Test.java<span class=nt>&lt;/include&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/includes&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/plugin&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/plugins&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/build&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- Mandatory dependencies for using Spock --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.spockframework<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>spock-core<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.0-groovy-2.4<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- Optional dependencies for using Spock --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.codehaus.groovy<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>groovy-all<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>2.4.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.codehaus.groovy<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>groovy-backports-compat23<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>2.3.7<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>junit<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>junit<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>4.12<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.mockito<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>mockito-all<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.10.19<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- only required if Hamcrest matchers are used --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.hamcrest<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>hamcrest-core<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.3<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- enables mocking of classes (in addition to interfaces) --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>cglib<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>cglib-nodep<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>3.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- enables mocking of classes without default constructor --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.objenesis<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>objenesis<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>2.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>test<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=references>References</h1><ul><li><a href=https://msdn.microsoft.com/en-us/library/jj620911.aspx>MSDN article on Exploratory Software Testing</a></li><li><a href=https://spockframework.github.io/spock/docs/>Spock Reference Documentation</a></li></ul><p><strong>That&rsquo;s all folks!</strong></p></div><div class='post_extra mb-2'><div class='share copy'></div><a href="http://twitter.com/share?text=Check out this post on the QAware Engineering Blog about Exploratory%20Open%20Source%20Software%20Testing%20with%20Spock&url=https%3a%2f%2fblog.qaware.de%2fposts%2fspock-testing%2f&hashtags=Agile%2cBDD%2cGroovy%2cIntegrationTesting%2cJava%2cSpecification%2cSpock%2cTDD%2cUnitTesting%2cTesting"><div class='share twitter'></div></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fblog.qaware.de%2fposts%2fspock-testing%2f"><div class='share linkedin'></div></a><a href="mailto:?subject=Exploratory%20Open%20Source%20Software%20Testing%20with%20Spock&amp;body=Hi,%0D%0A%0D%0ACheck out this post on the QAware Engineering Blog: https%3a%2f%2fblog.qaware.de%2fposts%2fspock-testing%2f%0D%0A%0D%0ABest Regards"><div class='share email'></div></a></div><div></div></div></div></div><a href=https://blog.qaware.de/ class=post_nav><span class=post_next>The Latest Posts</span></a></main><footer><div class=footer-container><div class=short-link-area><div class=margin><div class=logo-qaware><a href=/><img src=/images/icons/logo-qaware-white.png alt=QAware width=195 height=43></a></div><div class=clr></div><div class=footer-links><a href=https://www.qaware.de/category/news/ class=foot-single-link>News</a>
<a href=https://www.qaware.de/kontakt/ class=foot-single-link>Kontakt</a><div class=footer-table><a href=https://www.qaware.de/impressum/ class="foot-single-link footer-table-cell">Legal Notice</a>&nbsp;|&nbsp;
<a href=https://www.qaware.de/datenschutz/ class="foot-single-link footer-table-cell">Privacy</a></div></div><nav class=nav-social><ul class=e-social id=c1375><li><a href=http://www.kununu.com/qaware title=Kununu target=_blank class="icon icon-kununu-outline"><span></span></a></li><li><a href=https://www.twitter.com/qaware title=Twitter target=_blank class="icon icon-twitter-outline"><span></span></a></li><li><a href=https://www.linkedin.com/company/qaware-gmbh title=LinkedIn target=_blank class="icon icon-linkedin-outline"><span></span></a></li><li><a href=https://github.com/qaware title=GitHub target=_blank class="icon icon-git-outline"><span></span></a></li><li><a href=https://www.slideshare.net/qaware title=SlideShare target=_blank class="icon icon-slideshare-outline"><span></span></a></li><li><a href=https://www.youtube.com/channel/UCmNf72xADnO57idipq9jvMg title=Youtube target=_blank class="icon icon-youtube-outline"><span></span></a></li></ul></nav><div class=clr></div></div></div><nav class="footer-nav nav-area"><ul class=margin><li><a href=https://www.qaware.de/leistungen/>Leistungen</a></li><li><a href=https://www.qaware.de/unternehmen/>Unternehmen</a></li><li><a href=https://www.qaware.de/karriere/>Karriere</a></li></ul></nav></div></footer><script src=https://blog.qaware.de/js/index.min.791bb653c336adab277d58e8a52b9e81250276bb14f8fced435ae89f02d3155ae233664425075d8cb7ef5444d08a4a2276ee6bf16082d57c12c85f010e25412a.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-45534590-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-45534590-1")</script></body></html>