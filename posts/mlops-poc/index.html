<!doctype html><html lang=en><head><title>MLOps for everyone: A universal MLOps-Blueprint based on Kubeflow - QAware | Software Engineering Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=yes"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="In this article we present the QAware concept of an MLOps Blueprint."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="MLOps for everyone: A universal MLOps-Blueprint based on Kubeflow"><meta property="og:description" content="In this article we present the QAware concept of an MLOps Blueprint."><meta property="og:url" content="https://blog.qaware.de/posts/mlops-poc/"><meta property="og:image" content="https://blog.qaware.de/images/mlops-poc/pipeline.png"><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json crossorigin=use-credentials><link rel=icon href=/QAware_Logo_Icon_RGB_Petrol.svg type=image/svg+xml><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://blog.qaware.de/posts/mlops-poc/><link rel=stylesheet href=https://blog.qaware.de/css/main.d6f73e4ceed166763b77e6ae4748dae9ad47198cedbf1a4fc474c78a007dbf47d6dee613baf3572eedb6eece647a608333945bf28218018eb8455db0c1399674.css integrity='sha512-1vc+TO7RZnY7d+auR0ja6a1HGYztvxpPxHTHigB9v0fW3uYTuvNXLu227s5kemCDM5Rb8oIYAY64RV2wwTmWdA==' title=templateStyle><script id=Cookiebot src=https://consent.cookiebot.com/uc.js data-cbid=4e938949-aa56-465e-9c2a-175bb6c31d81 data-blockingmode=auto type=text/javascript></script></head><body><header><div id=main-header><a href=/ id=main-header-logo><img src=/images/icons/logo_qaware.svg alt=QAware id=main-header-logo-img></a><div id=main-header-nav-items-container><nav id=main-nav><ul class=main-nav-menu><li class=main-nav-menu><a href=https://blog.qaware.de/ class="main-nav-menu nav-item">Posts</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://blog.qaware.de/tags/ class="main-nav-sub-menu nav-item">Tags</a></li><li class=main-nav-sub-menu><a href=https://blog.qaware.de/posts/ class="main-nav-sub-menu nav-item">Archive</a></li></ul></li><li class=main-nav-menu><a href=https://blog.qaware.de/ class="main-nav-menu nav-item">Resources</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://www.github.com/qaware class=main-nav-sub-menu>GitHub</a></li><li class=main-nav-sub-menu><a href=https://de.slideshare.net/QAware class=main-nav-sub-menu>SlideShare</a></li><li class=main-nav-sub-menu><a href=https://www.youtube.com/user/QAwareGmbH class=main-nav-sub-menu>YouTube</a></li><li class=main-nav-sub-menu><a href=https://www.meetup.com/de-DE/Cloud-Native-Night class=main-nav-sub-menu>Meetup Mainz</a></li><li class=main-nav-sub-menu><a href=https://www.meetup.com/de-DE/cloud-native-muc/ class=main-nav-sub-menu>Meetup Munich</a></li></ul></li><li class=main-nav-menu><a href=https://www.qaware.de class=main-nav-menu>Company</a><ul class=main-nav-sub-menu><li class=main-nav-sub-menu><a href=https://www.qaware.de class=main-nav-sub-menu>Website</a></li><li class=main-nav-sub-menu><a href=https://twitter.com/qaware class=main-nav-sub-menu>Twitter</a></li><li class=main-nav-sub-menu><a href=http://www.linkedin.com/company/qaware-gmbh class=main-nav-sub-menu>Linkedin</a></li><li class=main-nav-sub-menu><a href=http://www.xing.com/companies/qawaregmbh class=main-nav-sub-menu>Xing</a></li><li class=main-nav-sub-menu><a href=http://www.kununu.com/qaware class=main-nav-sub-menu>Kununu</a></li></ul></li><li class=main-nav-menu><a href=https://www.qaware.de/kontakt class=main-nav-menu>Contact</a></li></ul></nav><a id=mobile-nav-icon-link href=#><div id=mobile-nav-icon></div></a></div></div><div id=mobile-nav-dropdown><nav id=mobile-nav class="mobile-nav collapsed"><ul><li><a href=https://blog.qaware.de/ class=nav-item>Posts</a><ul><li><a href=https://blog.qaware.de/tags/ class=nav-item>Tags</a></li><li><a href=https://blog.qaware.de/posts/ class=nav-item>Archive</a></li></ul></li><li><a href=https://blog.qaware.de/ class=nav-item>Resources</a><ul><li><a href=https://www.github.com/qaware>GitHub</a></li><li><a href=https://de.slideshare.net/QAware>SlideShare</a></li><li><a href=https://www.youtube.com/user/QAwareGmbH>YouTube</a></li><li><a href=https://www.meetup.com/de-DE/Cloud-Native-Night>Meetup Mainz</a></li><li><a href=https://www.meetup.com/de-DE/cloud-native-muc/>Meetup Munich</a></li></ul></li><li><a href=https://www.qaware.de class=nav-item>Company</a><ul><li><a href=https://www.qaware.de>Website</a></li><li><a href=https://twitter.com/qaware>Twitter</a></li><li><a href=http://www.linkedin.com/company/qaware-gmbh>Linkedin</a></li><li><a href=http://www.xing.com/companies/qawaregmbh>Xing</a></li><li><a href=http://www.kununu.com/qaware>Kununu</a></li></ul></li><li><a href=https://www.qaware.de/kontakt class=nav-item>Contact</a></li></ul></nav></div></header><main><div class='wrap mt-4 post'><div><p class='post_date pale'>18. March 2024</p><h1 class=post_title>MLOps for everyone: A universal MLOps-Blueprint based on Kubeflow</h1><p class=pale>by Victor Wolf, Lars Kleinschmidt, Martin Siehler & Simon Siedersleben | 1221 words | ~6 min read</p><p><a class=post_tag href=/tags/mlops/>mlops</a>
<a class=post_tag href=/tags/ai/>ai</a>
<a class=post_tag href=/tags/machine-learning/>machine learning</a>
<a class=post_tag href=/tags/kubeflow/>kubeflow</a></p><div class=post_body><div class=post_inner><img src=https://blog.qaware.de/images/mlops-poc/pipeline.png alt=mlops-poc/pipeline.png class='post_thumbnail mt-1'><h1 id=what-is-mlops-anyway>What is MLOps anyway?</h1><p>MLOps is the abbreviation for Machine Learning Operations and is a paradigm that aims to implement and maintain machine learning models reliably and efficiently.
MLOps differs from classic DevOps, in particular, in that it integrates models and data in the development process as well as operations.
One challenge is that data and models can be very large, which makes it difficult to actively develop and maintain these systems.
At its best, MLOps not only orchestrates the management of big data and complex models but also facilitates collaboration between data scientists, developers, and operations engineers.</p><h1 id=context>Context</h1><p>More than ever before, the influence of AI can be felt in today&rsquo;s society.
In the project world, too, there are currently numerous AI projects or projects that can be optimized using AI, be it in facial recognition, product recommendation, anomaly detection, or chatbots.
That is why we have developed a blueprint as part of our AI Guild that optimally integrates AI into software development.</p><p>In addition to building up knowledge on this topic, we chose a practical approach and set ourselves the goal of tackling a simple ML problem using typical MLOps techniques and recording it in a Proof of Concept (PoC).
Above all, it was important for us to be able to design the pipeline ourselves and operate it in a cloud managed by us.</p><p>The first question arose immediately: Which technologies do we actually want to use to build and deploy this pipeline?
After a quick Google search, we directly found numerous solutions that promised simple deployment of MLOps with a high degree of adaptability to cloud and project conditions.
So we simply followed these approaches and tested various frameworks.
Unfortunately, we soon realized that we had fallen victim to promises that were far too high.
Some of the solutions were technically far too immature or not as flexible to use as we had hoped.
ZenML was a typical example of this.
Locally, we were able to quickly set up a pipeline that could solve our problem.
The significant challenges arose when we attempted to deploy and operate this pipeline in the cloud.
The seemingly simple deployment functionality led to numerous errors, and after a few attempts to fix them and posting issues on GitHub, we made no progress until we put the project aside again.
We made another attempt with TFX.
TFX is a TensorFlow execution framework that is based on Kubeflow Pipelines.
This solution works similarly to Kubeflow Pipelines and adds an abstraction layer on top.
This allowed us to deploy pipelines in the cloud.
However, the added value compared to Kubeflow Pipelines was too low for us.</p><p>Nevertheless, this brought us one step closer to our decision.
So why not just use Kubeflow Pipelines directly?
With Kubeflow Pipelines, you can easily define your pipelines and deploy them directly on a Kubeflow cluster.
Kubeflow itself is based directly on the Kubernetes stack and therefore runs cloud-agnostic.
For this solution, we needed a little more customization and configuration to wire the components.
However, this also gave us direct influence on the functionality we needed for our pipeline.
In the end, we started to build our own MLOps framework/blueprint based on Kubeflow pipelines.
Now we have full control over the functionality and can react more easily in case of problems.</p><p>With that, we set out to tackle the planned PoC.</p><h1 id=validating-our-decision-the-poc>Validating Our Decision: The PoC</h1><p>To validate the decision for Kubeflow, we developed a Proof of Concept (PoC) pipeline to get to know the functionality of Kubeflow in detail.
We used a simple TensorFlow model (Fashion MNIST) for this.</p><p>We developed two alternative variants for execution and deployment.
One variant uses a classic Kubeflow instance, which we run in the Google Kubernetes Engine (GKE), while the other uses Vertex AI.
Vertex AI can run Kubeflow pipelines with little administrative overhead.</p><p>The Vertex AI variant is well suited if you want to quickly get into the intricacies of Kubeflow without having to worry about a Kubeflow instance.</p><p>However, in terms of independence from cloud providers, a separate Kubeflow instance often makes more sense.
The pipeline performs four steps:</p><h3 id=1-data-loading>1. Data Loading</h3><p>The data for training and evaluating the model must be provided at the beginning.
In this case, the data is loaded from the Keras Fashion-MNIST data set.
Alternatively, it can also be loaded from CSV files, databases or other data sources.</p><h3 id=2-model-training>2. Model Training</h3><p>The model is trained. In this case, TensorFlow is used for training.</p><p>However, the functionality is so open by design that any type of model can be trained.
The pipeline stores the trained model in a Google Cloud Bucket.</p><h3 id=3-evaluation>3. Evaluation</h3><p>To verify the model&rsquo;s accuracy and assess its quality relative to previous versions, tests are carried out in this step using the test data collected in step one.
Metrics such as accuracy can be collected from this.
If the model falls below certain minimum values or is worse than the previous one, it can be rejected so that the old one remains available.</p><h3 id=4-serving>4. Serving</h3><p>The model is deployed to an endpoint using a serving container, which is either pre-built (e.g. the TensorFlow Serving Container) or can be created by the user.
Either Vertex AI Serving can be used for this, or the container can be deployed in the GKE cluster already used for Kubeflow.</p><p>We are very satisfied with the functionalities offered.
A third-party model was integrated in a very short time using our PoC.
Kubeflow is versatile and can be used sensibly.
The four steps implemented in the PoC represent the minimum for our use case.</p><p>However, further steps can easily be added.</p><h1 id=looking-ahead-the-universal-blueprint>Looking Ahead: The Universal Blueprint</h1><p>In our quest to realize the ideal MLOps ecosystem, we have used the findings from our PoC to consider other key aspects.
One critical point is that our current PoC relies heavily on Google Cloud components.
Therefore, we plan to develop a universal blueprint that is not only cloud-agnostic and vendor-independent, but also easy to configure and integrate.
The diagram provides an overview of the planned components of the blueprint.</p><p><img src=/images/mlops-poc/blueprint_structure.png alt>
<em>Our MLOps Blueprint Cloud Stack</em></p><p>We intend to extend our PoC with observability components using a Prometheus Grafana stack.
Evidently AI could also be used to collect ML-specific metrics.
In the area of Continuous Delivery, we are also aiming for an improvement to achieve a stronger focus on GitOps.
This could be done by implementing Flux.
We are also planning to support our current serving container with a serving framework.
BentoML would be an option here.
In the data segment, we would like to integrate several configurable data sources.
Although the model aspect is largely covered by our PoC, we see potential for optimization through the use of an efficient model registry such as MLflow.</p><p>We have chosen Kubeflow as the foundation for our entire MLOps stack.
This is due to its Kubernetes-native features, which ensure a certain independence from vendors, as well as the positive experiences we have already had with Kubeflow in our PoC</p><p>Our next goal is to implement this universal blueprint.
This should make it possible to support the most diverse ML use cases with simple configurations.
This paves the way for the productive use of ML systems at QAware by providing a flexible and robust basis for various applications.</p></div><div class='post_extra mb-2'><div class='share copy'></div><a href="http://twitter.com/share?text=Check out this post on the QAware Engineering Blog about MLOps%20for%20everyone%3a%20A%20universal%20MLOps-Blueprint%20based%20on%20Kubeflow&url=https%3a%2f%2fblog.qaware.de%2fposts%2fmlops-poc%2f&hashtags=MLOps%2cAI%2cMachineLearning%2cKubeflow"><div class='share twitter'></div></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fblog.qaware.de%2fposts%2fmlops-poc%2f"><div class='share linkedin'></div></a><a href="mailto:?subject=MLOps%20for%20everyone%3a%20A%20universal%20MLOps-Blueprint%20based%20on%20Kubeflow&amp;body=Hi,%0D%0A%0D%0ACheck out this post on the QAware Engineering Blog: https%3a%2f%2fblog.qaware.de%2fposts%2fmlops-poc%2f%0D%0A%0D%0ABest Regards"><div class='share email'></div></a></div><div></div></div></div></div><a href=https://blog.qaware.de/ class=post_nav><span class=post_next>The Latest Posts</span></a></main><footer><div class=footer-container><div class=short-link-area><div class=margin><div class=logo-qaware><a href=/><img src=/images/icons/logo-qaware-white.png alt=QAware width=195 height=43></a></div><div class=clr></div><div class=footer-links><a href=https://www.qaware.de/category/news/ class=foot-single-link>News</a>
<a href=https://www.qaware.de/kontakt/ class=foot-single-link>Kontakt</a><div class=footer-table><a href=https://www.qaware.de/impressum/ class="foot-single-link footer-table-cell">Legal Notice</a>&nbsp;|&nbsp;
<a href=https://www.qaware.de/datenschutz/ class="foot-single-link footer-table-cell">Privacy</a></div></div><nav class=nav-social><ul class=e-social id=c1375><li><a href=http://www.kununu.com/qaware title=Kununu target=_blank class="icon icon-kununu-outline"><span></span></a></li><li><a href=https://www.twitter.com/qaware title=Twitter target=_blank class="icon icon-twitter-outline"><span></span></a></li><li><a href=https://www.linkedin.com/company/qaware-gmbh title=LinkedIn target=_blank class="icon icon-linkedin-outline"><span></span></a></li><li><a href=https://github.com/qaware title=GitHub target=_blank class="icon icon-git-outline"><span></span></a></li><li><a href=https://www.slideshare.net/qaware title=SlideShare target=_blank class="icon icon-slideshare-outline"><span></span></a></li><li><a href=https://www.youtube.com/channel/UCmNf72xADnO57idipq9jvMg title=Youtube target=_blank class="icon icon-youtube-outline"><span></span></a></li></ul></nav><div class=clr></div></div></div><nav class="footer-nav nav-area"><ul class=margin><li><a href=https://www.qaware.de/leistungen/>Leistungen</a></li><li><a href=https://www.qaware.de/unternehmen/>Unternehmen</a></li><li><a href=https://www.qaware.de/karriere/>Karriere</a></li></ul></nav></div></footer><script src=https://blog.qaware.de/js/index.min.791bb653c336adab277d58e8a52b9e81250276bb14f8fced435ae89f02d3155ae233664425075d8cb7ef5444d08a4a2276ee6bf16082d57c12c85f010e25412a.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-45534590-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-45534590-1")</script></body></html>